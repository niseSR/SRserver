<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="com.ajou.nise.security.arcinfo">

	<typeAlias alias="RequestParameter" type="com.ajou.nise.security.common.RequestParameter"/>		
	<typeAlias alias="user" type="com.ajou.nise.security.model.User"/>
	<typeAlias alias="relatedsh" type="com.ajou.nise.security.model.Relatedsh"/>
	<typeAlias alias="platform" type="com.ajou.nise.security.model.Platform"/>
	<typeAlias alias="asset" type="com.ajou.nise.security.model.Asset"/>
	<typeAlias alias="cm" type="com.ajou.nise.security.model.CM"/>
	<typeAlias alias="currentcm" type="com.ajou.nise.security.model.Currentcm"/>
	<typeAlias alias="implcm" type="com.ajou.nise.security.model.Implcm"/>
	<typeAlias alias="domainas" type="com.ajou.nise.security.model.Domainas"/>
	<typeAlias alias="domainaspl" type="com.ajou.nise.security.model.Domainaspl"/>
	<typeAlias alias="domainasrelatedsh" type="com.ajou.nise.security.model.Domainasrelatedsh"/>
	
	<resultMap class="user" id="userResult">
		<result property="userNumSeq" column="USER_NUMSEQ"/>
		<result property="userID" column="USER_ID"/>
		<result property="userPassword" column="USER_PASSWORD"/>
		<result property="userName" column="USER_NAME"/>
		<result property="userCompany" column="USER_COMPANY"/>
		<result property="userRegdate" column="USER_REGDATE"/>
		<result property="userShcount" column="USER_SHCOUNT"/>
		<result property="userAscount" column="USER_ASCOUNT"/>
		<result property="userThreatcount" column="USER_THREATCOUNT"/>
	</resultMap>

	<resultMap class="relatedsh" id="relatedshResult">
		<result property="relatedshNumSeq" column="RELATEDSH_NUMSEQ"/>
		<result property="relatedshID" column="RELATEDSH_ID"/>
		<result property="relatedshName" column="RELATEDSH_NAME"/>
		<result property="relatedshUserID" column="RELATEDSH_USERID"/>
		<result property="relatedshCompany" column="RELATEDSH_COMPANY"/>
		<result property="relatedshDescription" column="RELATEDSH_DESCRIPTION"/>
	</resultMap>
	
	<resultMap class="platform" id="platformResult">
		<result property="platformNumSeq" column="PLATFORM_NUMSEQ"/>
		<result property="platformID" column="PLATFORM_ID"/>
		<result property="platformPart" column="PLATFORM_PART"/>
		<result property="platformVendor" column="PLATFORM_VENDOR"/>
		<result property="platformProduct" column="PLATFORM_PRODUCT"/>
		<result property="platformVersion" column="PLATFORM_VERSION"/>
		<result property="platformUpdate" column="PLATFORM_UPDATE"/>
		<result property="platformEdition" column="PLATFORM_EDITION"/>
		<result property="platformLanguage" column="PLATFORM_LANGUAGE"/>
		<result property="platformSoftwareEdition" column="PLATFORM_SOFTWAREEDITION"/>
		<result property="platformTargetSoftware" column="PLATFORM_TARGETSOFTWARE"/>		
		<result property="platformTargetHardware" column="PLATFORM_TARGETHARDWARE"/>
		<result property="platformOther" column="PLATFORM_OTHER"/>
	</resultMap>
	
	<resultMap class="asset" id="assetResult">
		<result property="assetNumSeq" column="AS_NUMSEQ"/>
		<result property="assetID" column="AS_ID"/>
		<result property="assetName" column="AS_NAME"/>
		<result property="assetDescription" column="AS_DESCRIPTION"/>
	</resultMap>
	
	<resultMap class="cm" id="cmResult">
		<result property="cmNumSeq" column="CM_NUMSEQ"/>
		<result property="cmID" column="CM_ID"/>
		<result property="cmName" column="CM_NAME"/>
		<result property="cmDescription" column="CM_DESCRIPTION"/>
	</resultMap>
	
	<resultMap class="implcm" id="implcmResult">
		<result property="implcmNumSeq" column="IMPLCM_NUMSEQ"/>
		<result property="implcmID" column="IMPLCM_ID"/>
		<result property="implcmName" column="IMPLCM_NAME"/>
		<result property="implcmDescription" column="IMPLCM_DESCRIPTION"/>
		<result property="implcmSecService" column="IMPLCM_SECSERVICE"/>
	</resultMap>
	
	<resultMap class="currentcm" id="currentcmResult">
		<result property="currentcmNumSeq" column="CURRENTCM_NUMSEQ"/>
		<result property="currentcmCMID" column="CURRENTCM_CMID"/>
		<result property="currentcmUserID" column="CURRENTCM_USERID"/>
		<result property="currentcmImplcmID" column="CURRENTCM_IMPLCMID"/>
	</resultMap>
	
	<resultMap class="domainas" id="domainasResult">
		<result property="domainasNumSeq" column="DOMAINAS_NUMSEQ"/>
		<result property="domainasID" column="DOMAINAS_ID"/>
		<result property="domainasUserID" column="DOMAINAS_USERID"/>
		<result property="domainasName" column="DOMAINAS_NAME"/>
		<result property="domainasDescription" column="DOMAINAS_DESCRIPTION"/>
		<result property="domainasCriticality" column="DOMAINAS_CRITICALITY"/>
		<result property="domainasSGoalC" column="DOMAINAS_SGOALC"/>
		<result property="domainasSGoalI" column="DOMAINAS_SGOALI"/>
		<result property="domainasSGoalA" column="DOMAINAS_SGOALA"/>
	</resultMap>
	
	<resultMap class="domainaspl" id="domainasplResult">
		<result property="domainasplNumSeq" column="DOMAINASPL_NUMSEQ"/>
		<result property="domainasplDomainasID" column="DOMAINASPL_DOMAINASID"/>
		<result property="domainasplPlatformID" column="DOMAINASPL_PLATFORMID"/>
	</resultMap>
	
	<resultMap class="domainasrelatedsh" id="domainasrelatedshResult">
		<result property="domainasrelatedshNumSeq" column="DOMAINASRELATEDSH_NUMSEQ"/>
		<result property="domainasrelatedshDomainasID" column="DOMAINASRELATEDSH_DOMAINASID"/>
		<result property="domainasrelatedshRelatedshID" column="DOMAINASRELATEDSH_RELATEDSHID"/>
	</resultMap>
	
	<select id="getUserSHCount" parameterClass="RequestParameter" resultMap="userResult">
		SELECT
			*
		FROM
			TBL_USER
		WHERE
			USER_ID = #relatedshUserID#
	</select>
	<select id="getUserASCount" parameterClass="RequestParameter" resultMap="userResult">
		SELECT
			*
		FROM
			TBL_USER
		WHERE
			USER_ID = #domainasUserID#
	</select>
	<insert id="InsertStakeholderInformation" parameterClass="relatedsh">
		INSERT INTO	TBL_DO_RELATEDSH
			(RELATEDSH_ID, 
			RELATEDSH_NAME, 
			RELATEDSH_USERID, 
			RELATEDSH_DESCRIPTION, 
			RELATEDSH_COMPANY)	
		VALUES
			(#relatedshID#, 
			#relatedshName#, 
			#relatedshUserID#, 
			#relatedshDescription#, 
			#relatedshCompany#)	
	</insert>
	<update id="updateUserSHCnt" parameterClass="user">
		UPDATE TBL_USER
		SET
			USER_SHCOUNT = #userShcount#
			
		WHERE 
			USER_ID = #userID#

	</update>
	<select id="checkPlatformInfo" parameterClass="platform" resultMap="platformResult">
		SELECT
			*
		FROM
			TBL_DO_PLATFORM
		WHERE
			PLATFORM_ID = #platformID#
	</select>
	
	<insert id="InsertPlatformInformation" parameterClass="platform">
		INSERT INTO	TBL_DO_PLATFORM
			(PLATFORM_ID, 
			PLATFORM_PART, 
			PLATFORM_VENDOR, 
			PLATFORM_PRODUCT, 
			PLATFORM_VERSION,
			PLATFORM_UPDATE,
			PLATFORM_EDITION,
			PLATFORM_LANGUAGE,
			PLATFORM_SOFTWAREEDITION,
			PLATFORM_TARGETSOFTWARE,
			PLATFORM_TARGETHARDWARE,
			PLATFORM_OTHER)	
		VALUES
			(#platformID#, 
			#platformPart#, 
			#platformVendor#, 
			#platformProduct#,
			#platformVersion#,
			#platformUpdate#,
			#platformEdition#,
			#platformLanguage#,
			#platformSoftwareEdition#,
			#platformTargetSoftware#, 
			#platformTargetHardware#,
			#platformOther#)	
	</insert>
	
	<select id="selectAssetID" resultMap="assetResult" parameterClass="java.util.Map">
		SELECT 
			* 
		FROM 
			TBL_PO_AS 
		WHERE 
			AS_ID LIKE #assetType#
	</select>
	
	<select id="selectCMID" resultMap="cmResult" parameterClass="java.util.Map">
		SELECT 
			* 
		FROM 
			TBL_PO_CM 
		WHERE 
			CM_ID LIKE #cmType#
	</select>
	
	<select id="selectImplCMID" resultMap="implcmResult" parameterClass="java.util.Map">
		SELECT 
			* 
		FROM 
			TBL_PO_IMPLCM 
		WHERE 
			IMPLCM_ID LIKE #implcmType#
	</select>
	
	<select id="selectRelatedSHList" parameterClass="RequestParameter" resultMap="relatedshResult">
		SELECT 
			* 
		FROM 
			TBL_DO_RELATEDSH 
		WHERE 
			RELATEDSH_USERID = #relatedshUserID#
	</select>
	
	<insert id="InsertDomainasInformation" parameterClass="domainas">
		INSERT INTO	TBL_DO_DOMAINAS
			(DOMAINAS_ID, 
			DOMAINAS_NAME, 
			DOMAINAS_USERID, 
			DOMAINAS_DESCRIPTION,
			DOMAINAS_SGOALC,
			DOMAINAS_SGOALI,
			DOMAINAS_SGOALA,
			DOMAINAS_CRITICALITY)	
		VALUES
			(#domainasID#, 
			#domainasName#, 
			#domainasUserID#, 
			#domainasDescription#, 
			#domainasSGoalC#,
			#domainasSGoalI#,
			#domainasSGoalA#,
			#domainasCriticality#)	
	</insert>
	
	<update id="updateUserASCnt" parameterClass="user">
		UPDATE TBL_USER
		SET
			USER_ASCOUNT = #userAscount#
			
		WHERE 
			USER_ID = #userID#
	</update>
	
	<insert id="InsertDomainasPlatformInformation" parameterClass="java.util.Map">
		INSERT INTO	TBL_DO_DOMAINASPL
			(DOMAINASPL_DOMAINASID, 
			DOMAINASPL_PLATFORMID)	
		VALUES
			(#domainasplDomainasID#, 
			#domainasplPlatformID#)	
	</insert>
	
	<insert id="InsertDomainasRelatedshInformation" parameterClass="java.util.Map">
		INSERT INTO	TBL_DO_DOMAINASRELATEDSH
			(DOMAINASRELATEDSH_DOMAINASID, 
			DOMAINASRELATEDSH_RELATEDSHID)	
		VALUES
			(#domainasrelatedshDomainasID#, 
			#domainasrelatedshRelatedshID#)	
	</insert>
	
	<insert id="InsertCurrentCMInformation" parameterClass="RequestParameter">
		INSERT INTO	TBL_DO_CURRENTCM
			(CURRENTCM_CMID,
			CURRENTCM_USERID,
			CURRENTCM_IMPLCMID)	
		VALUES
			(#currentcmCMID#,
			#currentcmUserID#,
			#currentcmImplcmID#)	
	</insert>
</sqlMap>











